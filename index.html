<!DOCTYPE html>
<html>

<head>
    <title>Passenger Counter</title>
    <style>
        body {
            background-image: url("https://images.unsplash.com/photo-1527839321757-ad3a2f2be351?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=870&q=80");
            background-size: cover;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            font-weight: bold;
            text-align: center;
            color: white;
        }

        .backdrop {
            width: 90%;
            background-color: #00000066;
            backdrop-filter: blur(7px);
            margin: 3% auto;
            padding: 0.6rem 0.6rem;
            min-height: 80%;
            border-radius: 1rem;
        }

        /* Styling for buttons */
        button {
            display: inline-block;
            width: 48%;
            height: 80px;
            margin: 10px 5px 10px 5px;
            border: none;
            font-weight: bold;
            text-align: center;
            color: white;
            border-radius: 1rem;
            transition: 0.3s ease all;
        }

        button:hover {
            transform: scale(1.02);
        }

        button:active {
            transform: scale(1);
        }


        /* Styling for specific buttons */
        .increment-btn {
            background-color: rgba(0, 184, 138, .85);
            font-size: 2rem;
        }

        .decrement-btn {
            background-color: rgba(248, 106, 118, .85);
            font-size: 2rem;
        }

        .save-btn {
            background-color: rgba(35, 123, 204, .85);
            font-size: 2rem;
        }

        .reset-btn {
            background-color: rgba(94, 94, 94, .85);
            font-size: 2rem;
        }

        .history-btn {
            height: 30px;
            background-color: rgba(94, 94, 94, .85);
        }

        /* Styling for history display */
        #history {
            font-size: 16px;
            font-weight: normal;
            line-height: 1.5;
            min-height: 15px;
            margin-bottom: 10px;
        }

        .historyContainer {
            margin-top: 20px;
            padding: 10px;
            background-color: #00000066;
            border-radius: 1rem;
        }
    </style>
</head>

<body onload="toggleHistory()">

    <div class="backdrop">
        <h2>Passenger Counter</h2>

        <h1 id="count">0</h1>
        <button class="increment-btn" onclick="incrementCount()">+ + Increment Count + +</button>
        <button class="decrement-btn" onclick="decrementCount()">- - Decrement Count - -</button>
        <button class="save-btn" onclick="saveCount()">Save Count</button>
        <button class="reset-btn" onclick="resetCount()">Reset Count</button>

        <div class="historyContainer">
            <h3>Count History</h3>
            <div id="history"></div>
            <button class="history-btn" onclick="resetHistory()">Clear History</button>
        </div>

    </div>
    <script>
        let curCount = 0;
        let viewCount = document.getElementById('count');
        let historyEntries = [];
        let passenger = () => curCount == 1 ? 'Passenger' : 'Passengers';

        incrementCount = () => {
            curCount++;
            viewCount.innerHTML = `${curCount} ${passenger()}`;
        }
        decrementCount = () => {
            curCount > 0 ? curCount-- : false;
            viewCount.innerHTML = `${curCount} ${passenger()}`;
        }
        resetCount = () => {
            if (confirm("Are you sure you want to reset the counter?") == true) {
                curCount = 0;
                viewCount.innerHTML = 'Counter Reset';
            } else { "Reset Cancelled." }
        }

        addHistory = () => {
            const currentDate = new Date();
            const dateString = currentDate.toLocaleDateString();
            const timeString = currentDate.toLocaleTimeString();
            const historyLine = `${dateString} ${timeString} - Count: ${curCount} ${passenger()}`;

            historyEntries.push(historyLine);
            document.getElementById('history').innerHTML = historyEntries.join("<br>");
            curCount = 0;
            viewCount.innerHTML = 'Saved!';
        }

        resetHistory = () => {
            if (confirm("Are you sure you want to clear the count history?") == true) {
                historyEntries = [];
                toggleHistory();
            } else { 'Count history reset cancelled.' }
        }

        saveCount = () => {
            curCount > 0 ? addHistory() : false;
            toggleHistory();
        }

        toggleHistory = () => {
            const historyContainer = document.querySelector('.historyContainer');
            if (historyEntries.length > 0) {
                historyContainer.style.visibility = "visible";
            } else {
                historyContainer.style.visibility = "hidden";
            }
        }
    </script>
</body>

</html>